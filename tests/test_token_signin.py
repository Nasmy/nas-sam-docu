from google.auth.transport import requests
from google.oauth2 import id_token


# Lambda layer

"""
clientId
: 
"739388002072-lqhmp6jbvhrvn7p40i3s27fmc41bsflh.apps.googleusercontent.com"
credential
: 
"eyJhbGciOiJSUzI1NiIsImtpZCI6IjgzOGMwNmM2MjA0NmMyZDk0OGFmZmUxMzdkZDUzMTAxMjlmNGQ1ZDEiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2OTQ0OTc1ODMsImF1ZCI6IjczOTM4ODAwMjA3Mi1scWhtcDZqYnZocnZuN3A0MGkzczI3Zm1jNDFic2ZsaC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwODg0MTc3NjgwMTk5NzM1ODg0OSIsImVtYWlsIjoiaW1zaHViaGFtMjYyQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJhenAiOiI3MzkzODgwMDIwNzItbHFobXA2amJ2aHJ2bjdwNDBpM3MyN2ZtYzQxYnNmbGguYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJuYW1lIjoiU0hVQkhBTSBQUkpBUEFUIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0lkVkNLemVoVG1jZzJhdnZvNUsxcTJFVWJqc2x4bGJ5dlRkR3pwSnJQQz1zOTYtYyIsImdpdmVuX25hbWUiOiJTSFVCSEFNIiwiZmFtaWx5X25hbWUiOiJQUkpBUEFUIiwiaWF0IjoxNjk0NDk3ODgzLCJleHAiOjE2OTQ1MDE0ODMsImp0aSI6IjJiMmE1NjNiMmJlMzIwMGFmOGQ3ODc5ZWVlZWE2YmZjYTQwNmZlZGIifQ.GBMNS5veJ4Lyphb-CrqTsApYo_KCpl8MNLVlSxwSfb4Awgu4Kvufv6TKAKFK9QUCYcC-hVPJ0mOp3hJxdwr9woxbBbVbu7pvmHy6dknBMz0vv7MNObPyVUNJM9OvbtZrzJ9ESNb4ds6nUA2J_A6K0MDsdiK_QFYz00SKbQG9FAn4ArE48YU4XM15cyBVbk9H5Zj-JM6f2-fik-lwPX9e7dn8I-eksGzd9ZhJ9kax7qQlB56_oDp6gCs0bsvP5MiH3ChMyZogrrKfOCCBAltfXtZjnP90GCBXoLLmh5-dvMWIu9JX1VkRoxRxWMCeN2kb6yozqJOPxMXKIxQYT_xHRA"
select_by
: 
"btn_confirm"
"""


def test_google_signin_token():
    token = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjgzOGMwNmM2MjA0NmMyZDk0OGFmZmUxMzdkZDUzMTAxMjlmNGQ1ZDEiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2OTQ0OTc1ODMsImF1ZCI6IjczOTM4ODAwMjA3Mi1scWhtcDZqYnZocnZuN3A0MGkzczI3Zm1jNDFic2ZsaC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwODg0MTc3NjgwMTk5NzM1ODg0OSIsImVtYWlsIjoiaW1zaHViaGFtMjYyQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJhenAiOiI3MzkzODgwMDIwNzItbHFobXA2amJ2aHJ2bjdwNDBpM3MyN2ZtYzQxYnNmbGguYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJuYW1lIjoiU0hVQkhBTSBQUkpBUEFUIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0lkVkNLemVoVG1jZzJhdnZvNUsxcTJFVWJqc2x4bGJ5dlRkR3pwSnJQQz1zOTYtYyIsImdpdmVuX25hbWUiOiJTSFVCSEFNIiwiZmFtaWx5X25hbWUiOiJQUkpBUEFUIiwiaWF0IjoxNjk0NDk3ODgzLCJleHAiOjE2OTQ1MDE0ODMsImp0aSI6IjJiMmE1NjNiMmJlMzIwMGFmOGQ3ODc5ZWVlZWE2YmZjYTQwNmZlZGIifQ.GBMNS5veJ4Lyphb-CrqTsApYo_KCpl8MNLVlSxwSfb4Awgu4Kvufv6TKAKFK9QUCYcC-hVPJ0mOp3hJxdwr9woxbBbVbu7pvmHy6dknBMz0vv7MNObPyVUNJM9OvbtZrzJ9ESNb4ds6nUA2J_A6K0MDsdiK_QFYz00SKbQG9FAn4ArE48YU4XM15cyBVbk9H5Zj-JM6f2-fik-lwPX9e7dn8I-eksGzd9ZhJ9kax7qQlB56_oDp6gCs0bsvP5MiH3ChMyZogrrKfOCCBAltfXtZjnP90GCBXoLLmh5-dvMWIu9JX1VkRoxRxWMCeN2kb6yozqJOPxMXKIxQYT_xHRA"
    client_id = "739388002072-lqhmp6jbvhrvn7p40i3s27fmc41bsflh.apps.googleusercontent.com"

    # Verify the token
    idinfo = id_token.verify_oauth2_token(token, requests.Request(), client_id)

    # ID token is valid, extract the user's Google Account ID
    userid = idinfo["sub"]
    email_verified = idinfo["email_verified"]
    email = idinfo["email"]
    pic = idinfo["picture"]
    print(userid, email_verified, email)
    print(pic)
